<%= render("web/settings/shared/header", current: "profile") %>

<main>
  <%= form_with(model: current_user, scope: :user, url: web_users_password_path, method: :put) do |f| %>
    <% if f.object.errors.any? %>
      <ul>
        <% f.object.errors.full_messages.each do |message| %>
          <li><code><%= message %></code></li>
        <% end %>
      </ul>
    <% end %>

    <p>
      <%= f.label :email %>
      <%= f.email_field :email, disabled: true %>
    </p>

    <p>
      <%= f.label :password_challenge, "Current Password" %>
      <%= f.password_field :password_challenge, required: true %>
    <p>

    <p>
      <%= f.label :password, "New Password" %>
      <%= f.password_field :password, required: true %>
    <p>

    <p>
      <%= f.label :password_confirmation %>
      <%= f.password_field :password_confirmation, required: true %>
    <p>

    <p>
      <%= f.submit "Update Password" %>
      <%= link_to("Cancel", web_tasks_all_path, style: "margin-left: 10px") %>
    <p>
  <% end %>

  <hr />

  <h2>Account Deletion</h2>

  <p>
    Deleting your account will permanently remove all of your tasks and lists. This action cannot be undone.
  </p>

  <%= button_to(
    "Delete Account",
    web_users_path,
    method: :delete,
    data: {confirm: "Are you sure you want to delete your account?"},
    style: "background-color: #FF6962; border: none"
  ) %>
</main>
